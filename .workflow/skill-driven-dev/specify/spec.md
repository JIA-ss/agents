# 功能规范: Skill 驱动开发模式（Skill-Driven Development）

> **规范 ID**: SDD-SPEC-20260209
> **状态**: approved
> **版本**: 0.2
> **作者**: AI Agent
> **最后更新**: 2026-02-09

---

## 1. 概述

建立一套标准化的 Skill 驱动开发方法论，以 CLAUDE.local.md 为总纲、每个特性对应一个 Skill，所有代码改动与 Skill 关联并反馈回写，实现 AI 辅助开发知识的持续积累和迭代。

**目标用户**:
- AI 辅助开发者（通过 Claude Code 进行日常开发）
- 技术负责人（管理和推广 Skill 体系）
- 新团队成员（通过 Skill 快速了解系统）

**成功指标**:
- Skill 发现时间：新成员找到正确 Skill ≤ 30 秒（对应 AC-1.5）
- Sync 遗漏率：从 >50% 降至 <10%（对应 AC-2.5）
- 新项目接入时间：从零搭建到首个 Skill 可用 ≤ 1 小时（对应 AC-3.4）

---

## 2. 问题陈述

### 2.1 当前状态

render-pipeline 项目已有一套运行中的 Skill 体系（~15 个 Skill），包含 CLAUDE.local.md 总纲、SKILL.md 标准结构、自迭代机制。但该体系仅在单个项目中运行，未标准化为可复用方法论。

### 2.2 痛点

1. **Skill 发现困难**：新人面对 15+ 个 Skill 目录，需逐个翻看才能找到任务对应的 Skill
2. **Sync 遗漏频繁**：近半数代码修改后未同步 Skill，导致 SKILL.md 内容逐渐过时
3. **初始化成本高**：新项目缺少标准化模板和指南，搭建 Skill 体系需要从零摸索

### 2.3 期望结果

- 开发者描述任务后即获得相关项目知识指导，无需人工搜索
- 代码改动后 AI 自动判断并提示 Skill 同步需求，Sync 遗漏率 <10%
- 新项目基于标准模板和指南，1 小时内完成 Skill 体系初始搭建
- 方法论可跨技术栈复用

---

## 3. 用户故事

### US-1: Skill 自动发现与知识路由

**优先级**: Must

```
作为一名使用 Claude Code 的开发者，
我想要在描述任务后即获得与任务相关的项目知识和最佳实践指导，
以便我不需要记忆或搜索知识分布在哪里，直接按指导完成高质量开发。
```

**验收标准**:
- [ ] AC-1.1: When 开发者描述一个任务（如"修复体积雾闪烁"），AI 应自动为该任务匹配相关的知识域并提供上下文指导
- [ ] AC-1.2: When 任务涉及多个系统时（如"GI 与体积雾耦合"），AI 应识别全部相关知识域并综合提供指导
- [ ] AC-1.3: When 任务无法匹配到任何已有知识域时，AI 应告知用户并建议创建新 Skill 或归入框架级 Skill
- [ ] AC-1.4: When AI 匹配到错误的知识域时，用户应能纠正，AI 应记录纠正以改进后续匹配
- [ ] AC-1.5: 从用户描述任务到 AI 提供知识指导的总耗时应 ≤ 30 秒
- [ ] AC-1.6: 每个 Skill 应声明与其他 Skill 的关联关系（依赖、影响、共享资源），支持 AI 进行跨系统知识路由

**备注**: Skill 发现机制可基于 CLAUDE.local.md 中的索引、SKILL.md frontmatter 的 description 字段、或目录扫描等方式实现，具体方案由设计阶段决定

### US-2: 智能 Skill Sync

**优先级**: Must

```
作为一名使用 Claude Code 的开发者，
我想要在完成代码修改后被告知是否需要同步相关知识文档，
以便知识文档始终与代码保持一致，不会因遗忘而过时。
```

**验收标准**:
- [ ] AC-2.1: When 代码修改涉及外部接口变化（如 API 签名、公开参数、默认值、关键字变化）时，AI 应提示需要同步，并指出需更新的内容区域
- [ ] AC-2.2: When 代码修改仅为内部实现变化（如 Bug 修复、性能优化、注释调整）时，AI 应自动跳过同步提示
- [ ] AC-2.3: When AI 判断需要同步时，应自动完成同步操作（更新 Skill 文档和变更记录）
- [ ] AC-2.4: When 用户拒绝同步建议时，AI 应记录跳过原因以备后续审计
- [ ] AC-2.5: When 代码修改类型不明确（如同时包含接口变更和内部修复）时，AI 应列出变更摘要并请求用户决策
- [ ] AC-2.6: When Skill 文件存在写入冲突（如多人并行修改）时，系统应提供冲突提示和合并策略

### US-3: 新项目快速接入

**优先级**: Must

```
作为一名技术负责人，
我想要基于标准化模板和指南为新项目搭建 AI 知识管理框架，
以便团队无需从零摸索，快速建立特性知识体系。
```

**验收标准**:
- [ ] AC-3.1: 系统应提供项目总纲的初始化模板，含 Skill 驱动开发流程、Skill 索引占位、全局约束等必要信息维度
- [ ] AC-3.2: 系统应提供特性识别指南，帮助用户判断哪些模块应拆分为独立 Skill
- [ ] AC-3.3: 系统应提供 Skill 文档的标准模板，含必选和可选信息维度说明
- [ ] AC-3.4: 假设用户已阅读指南且项目有明确模块边界，从模板创建到首个 Skill 可用，全流程应 ≤ 1 小时
- [ ] AC-3.5: 模板和指南应通过示例说明如何适配至少 3 种不同技术栈（如 Unity/C#、Node.js、Python）
- [ ] AC-3.6: When 模板下载或初始化失败时，系统应提供明确错误信息和手动操作指南
- [ ] AC-3.7: When 项目结构不符合模板预期时（如无明确模块边界），指南应提供"渐进式拆分"策略

### US-4: Skill 生命周期管理

**优先级**: Should

```
作为一名技术负责人，
我想要有清晰的 Skill 生命周期规则，
以便 Skill 体系保持健康，避免膨胀或失效。
```

**验收标准**:
- [ ] AC-4.1: 系统应定义 Skill 创建标准：何时新建 Skill vs. 扩展现有 Skill，提供判断清单
- [ ] AC-4.2: 系统应定义 Skill 废弃流程：包括标记废弃、通知依赖方、归档处理
- [ ] AC-4.3: 系统应定义 Skill 合并规则：当两个 Skill 职责重叠超过 50% 时触发合并评估
- [ ] AC-4.4: 系统应支持定期审计（如大版本发布前），检查所有 Skill 时效性
- [ ] AC-4.5: When 已废弃的 Skill 被错误引用时，AI 应提示该 Skill 已废弃并指向替代方案
- [ ] AC-4.6: When Skill 合并导致信息冲突时，系统应提供冲突标记和人工裁决流程

### US-5: Skill 质量可观测

**优先级**: Could

```
作为一名技术负责人，
我想要能看到每个 Skill 的健康状态，
以便识别需要维护的 Skill 并持续改进体系质量。
```

**验收标准**:
- [ ] AC-5.1: 系统应记录每个 Skill 的使用频率、最后更新时间、关联代码变更次数
- [ ] AC-5.2: 系统应支持生成 Skill 健康报告，列出需关注的 Skill（如超过 30 天未更新、使用频率低于平均值 50%）
- [ ] AC-5.3: 健康报告应包含可操作的改进建议（如"建议更新 XX 章节"、"建议与 YY 合并"）
- [ ] AC-5.4: When 无历史数据时（如新建 Skill），报告应标注"数据不足"而非给出误导性评估

---

## 4. 功能性需求

| ID | 需求描述 | 优先级 | 关联 US |
|----|----------|--------|---------|
| FR-1 | 项目总纲（CLAUDE.local.md）应包含标准化信息维度：项目概述、Skill 驱动开发流程、Skill 索引、Sync 规则、全局约束 | Must | US-1, US-2 |
| FR-2 | Skill 索引应包含全部 Skill 的名称、负责的功能域和关联 Skill 列表 | Must | US-1 |
| FR-3 | Skill 文档（SKILL.md）应有统一格式标准，涵盖概述、工作流程、核心规则、最佳实践、常见问题、参考文件和关联系统等信息维度 | Must | US-3 |
| FR-4 | Skill 应有自迭代机制，记录使用反馈、变更历史和改进过程 | Should | US-4, US-5 |
| FR-5 | Sync 规则应明确定义"必须同步"和"可跳过"的变更类型清单 | Must | US-2 |
| FR-6 | 提供项目总纲初始化模板 | Must | US-3 |
| FR-7 | 提供 Skill 文档初始化模板和特性识别指南 | Must | US-3 |
| FR-8 | 定义 Skill 创建/废弃/合并规则 | Should | US-4 |

---

## 5. 非功能性需求

| ID | 类型 | 需求描述 | 验证方法 |
|----|------|----------|----------|
| NFR-1 | 低摩擦 | Sync 检查判断时间 ≤ 10 秒（AI 响应），用户确认操作 ≤ 2 步 | 计时测试 |
| NFR-2 | 技术栈兼容 | 至少在 3 种不同技术栈项目中验证通过（如 Unity/C#、Node.js、Python） | 多项目验证 |
| NFR-3 | 渐进式采纳 | 团队可仅从项目总纲 + 1 个 Skill 开始使用，后续逐步添加 | 最小集端到端验证 |
| NFR-4 | 平台兼容 | 必须兼容 Claude Code 的 .claude/ 目录和 SKILL.md frontmatter 格式 | 格式一致性验证 |
| NFR-5 | 可维护 | 模板更新后无需修改已有 Skill 文件（向后兼容） | 回归测试 |

---

## 6. 约束条件与假设

### 6.1 约束条件

| 类型 | 描述 | 来源 |
|------|------|------|
| 平台 | 必须基于 Claude Code 的 Skills 机制 | Claude Code 规范 |
| 目录 | 必须兼容 .claude/ 目录结构 | Claude Code 规范 |
| 版本控制 | 所有 Skill 文件必须纳入 Git 版本控制 | 团队规范 |
| 参考实现 | render-pipeline 项目的现有体系作为基准参考 | 已有实践 |

### 6.2 假设

| ID | 假设描述 | 如果错误的风险 | 已验证 |
|----|----------|----------------|--------|
| A-1 | 核心开发者均通过 Claude Code 进行开发 | 非 Claude 用户无法自动触发 Skill 流程（降级为人工阅读文档） | 否 |
| A-2 | SKILL.md frontmatter 的 description 字段足以支持 AI 自动匹配 | 匹配准确率低，需增加辅助索引 | 是（现有项目验证） |
| A-3 | 项目总纲中的 Skill 索引可通过脚本自动生成 | 若不可行则需手动维护，增加遗漏风险 | 否（待验证） |

---

## 7. 范围外

以下内容明确不在本次需求范围内：

- **CI/CD 集成** — 原因：属于第二阶段，待规范约束验证成熟后再实施
- **Skill 内容自动生成** — 原因：由现有 `/skill-generator` skill 负责
- **各 Skill 的具体内容编写** — 原因：由各特性专家负责，本规范只定义格式和流程
- **AI 模型训练/微调** — 原因：依赖 Claude Code 原生能力
- **非 Claude Code 工具适配** — 原因：Cursor 等工具的适配属于后续扩展

---

## 8. 待解决问题

| ID | 问题描述 | 负责人 | 状态 | 解决方案 |
|----|----------|--------|------|----------|
| Q-1 | A-3 验证：Skill 索引是否可通过脚本自动扫描生成 | 技术负责人 | 待解决 | 可考虑脚本扫描 .claude/skills/ 目录自动生成 |
| Q-2 | 非 Claude Code 用户如何从 Skill 体系受益 | 技术负责人 | 已解决 | Skill 文件本身作为知识文档可人工阅读 |

---

## 9. 验收清单

### 9.1 完整性
- [x] 所有用户故事都有验收标准（每个 ≥ 4 条，含负向场景）
- [x] 所有 FR 都关联到用户故事
- [x] 所有 NFR 都有可量化指标和验证方法
- [x] 所有假设已验证或标注待验证

### 9.2 质量
- [x] 无模糊词汇残留（"易于"、"快速"、"经常"已量化）
- [x] 无冲突需求
- [x] 成功指标与验收标准对齐
- [ ] 待解决问题 Q-1 需验证

### 9.3 审批
- [ ] 技术评审完成
- [ ] 利益相关者评审完成
- [ ] 最终批准已获得

---

## 附录

### A. 术语表

| 术语 | 定义 |
|------|------|
| Skill | 一个 SKILL.md 文件及其关联资源，代表某个特性/系统的 AI 知识包 |
| CLAUDE.local.md | 项目级 Claude Code 指令文件，作为 AI 开发总纲 |
| Skill Sync | 代码改动后将变更同步回 Skill 文档的操作 |
| Skill 索引 | 项目总纲中列出所有 Skill 及其职责域的索引 |
| 特性（Feature） | 项目中具有独立功能边界的模块/系统，对应一个 Skill |
| 自迭代机制 | Skill 基于使用反馈自动改进的能力，含反馈记录、趋势分析、改进提案 |

### B. 参考文献

- render-pipeline 项目 CLAUDE.local.md（现有参考实现）
- render-pipeline 项目 .claude/skills/ 目录（15+ 个 Skill 示例）
- Claude Code Skills 官方文档

### C. 变更历史

| 版本 | 日期 | 作者 | 变更内容 |
|------|------|------|----------|
| 0.1 | 2026-02-09 | AI Agent | 初始草稿 |
| 0.2 | 2026-02-09 | AI Agent | 基于审查修改：合并 US-6 到 US-1、量化 NFR、补充负向验收标准、剥离技术实现细节、对齐成功指标与 AC |

---

*由 /workflow-specify skill 生成*
