# 审查清单详情

## ANALYSIS-REVIEW 审查清单（调研充分性审查）

### 调研完成度

- [ ] 所有 P0 调研主题都已完成
- [ ] 所有 P1 调研主题都已完成（或有合理的跳过理由）
- [ ] 每个调研报告遵循 5 阶段结构（SCOPE → GATHER → ANALYZE → COMPARE → RECOMMEND）
- [ ] 每个调研有独立的目录结构

### Evidence 完整性（关键检查）

- [ ] **每个调研的 evidence 目录有内容**（≥2 个文件）
- [ ] **每个 evidence 文件有实际内容**（非空、非占位符）
- [ ] **每个调研结论都引用了 evidence**（格式: `[E-1]`）
- [ ] evidence 包含必需字段：ID、时间、类型、状态、关键发现、来源
- [ ] 高可信度来源（等级 A/B）的 evidence 占主导

### 结论质量

- [ ] 每个调研有明确的推荐结论
- [ ] 推荐理由有 evidence 支撑
- [ ] 提供了备选方案
- [ ] 标注了潜在风险
- [ ] 包含 Sources 列表

### 单一职责检查

- [ ] 每个调研只关注一个主题
- [ ] 调研内容不包含项目特定的整合细节
- [ ] 调研结论是通用的技术建议

### 新主题发现

- [ ] 检查调研过程中是否发现了新的需要调研的主题
- [ ] 新主题已添加到待调研列表

### 判定规则

| 判定 | 条件 |
|------|------|
| **PASS** | 所有 P0/P1 调研完成，每个调研 evidence ≥2 个且非空，结论有引用 |
| **CONTINUE_RESEARCH** | evidence 不足、结论无引用、发现新主题、调研不完整 |

### Evidence 问题示例

| 问题类型 | 示例 | 处理方式 |
|----------|------|----------|
| evidence 不足 | 只有 1 个 evidence 文件 | 补充更多搜索/分析 |
| evidence 为空 | 文件只有模板没有内容 | 填充实际内容 |
| 结论无引用 | "推荐使用 Redis" 没有 `[E-x]` | 添加引用 |
| 来源不可靠 | 全是等级 D 来源 | 补充官方/权威来源 |

---

## REVIEW 审查清单（设计审查）

### 架构完整性

- [ ] 架构图包含所有主要模块
- [ ] 模块间关系清晰
- [ ] 每个模块有明确的职责描述（不超过 50 字）
- [ ] 架构覆盖所有功能需求
- [ ] 架构视角说明完整（上下文/容器/组件/部署）

### 技术选型

- [ ] 每个技术选型都有理由说明（至少 1 个技术论据）
- [ ] **技术选型与调研结论一致**
- [ ] **技术选型引用了具体的调研报告**
- [ ] 提供备选方案
- [ ] 无与项目约束冲突的选型

### 调研证据支撑（关键检查）

- [ ] **每个技术选型都有对应的调研报告**
- [ ] **调研报告有充分的 evidence 支撑**
- [ ] 选型理由引用了 evidence（直接或间接）
- [ ] 无"凭经验"或"业界常用"等无证据的理由

### 依赖分析

- [ ] 内部依赖关系完整
- [ ] 外部依赖列表完整（包含版本）
- [ ] 依赖维护状态已评估
- [ ] 无已知安全问题的依赖

### 风险评估

- [ ] 识别 3-5 个关键风险（简单功能可为 1-2 个）
- [ ] 每个风险有可能性和影响评估
- [ ] 每个风险有缓解策略

### 安全与运维

- [ ] 安全与合规考虑明确（认证/授权/数据保护/审计）
- [ ] 可观测性与运维方案完整（指标/日志/追踪/告警）

### ADR 完整性

- [ ] 关键架构决策都有 ADR 记录
- [ ] ADR 包含：状态、上下文、决策、后果
- [ ] ADR 关联到相关 FR/NFR
- [ ] **ADR 引用了支撑的调研报告**

### 可追溯性

- [ ] 模块说明表包含"关联需求"列
- [ ] ADR 包含"关联需求"字段
- [ ] 所有 FR 都被设计覆盖
- [ ] 覆盖度 ≥ 95%
- [ ] **技术选型 → 调研报告映射完整**

### 职责边界检查

- [ ] 无具体的实施任务拆解
- [ ] 无详细的测试计划和测试用例
- [ ] 无上线/迁移/回滚的操作清单
- [ ] 无项目时间线和里程碑
- [ ] 无具体的性能测试指标和方法

### 判定规则

| 判定 | 条件 |
|------|------|
| **PASS** | 所有检查项通过，覆盖度 ≥ 95%，技术选型有调研支撑 |
| **NEEDS_RESEARCH** | 技术选型缺少调研报告或 evidence 支撑 |
| **NEEDS_PLAN** | 设计有问题需修改（架构不完整、风险评估不足、职责越界等） |

---

## 问题严重程度定义

| 级别 | 定义 | 影响 |
|------|------|------|
| **BLOCKER** | 阻止继续（严重安全问题、架构根本性错误、evidence 完全缺失） | 必须立即修复 |
| **CRITICAL** | 影响核心功能（关键模块缺失、重要风险未识别、技术选型无调研支撑） | >2个则 REJECTED |
| **MAJOR** | 影响可维护性（文档不完整、追溯性缺失、evidence 引用缺失） | >5个则 NEEDS_IMPROVEMENT |
| **MINOR** | 可选优化（格式问题、表述不清晰） | 不影响判定 |

---

## CRITICAL 级别问题示例

### ANALYSIS-REVIEW 阶段

1. **evidence 完全缺失**: 调研目录下没有任何 evidence 文件
2. **evidence 全部为空**: 所有 evidence 文件只有模板没有内容
3. **结论无任何引用**: 调研结论没有引用任何 evidence
4. **关键主题未调研**: P0 优先级的调研主题被跳过

### REVIEW 阶段

1. **技术选型无调研**: 选择了某技术但没有对应的调研报告
2. **选型与调研矛盾**: 选择了调研中不推荐的方案，且无合理解释
3. **职责越界**: 出现了具体的任务拆解或测试计划
4. **架构关键模块缺失**: 核心功能没有对应的模块设计

---

*Reference for workflow-plan REVIEW phases v3.0*
