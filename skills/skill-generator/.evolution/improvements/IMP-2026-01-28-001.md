# Improvement Proposal

## Metadata
- proposal_id: IMP-2026-01-28-001
- created: 2026-01-28
- deployed: 2026-01-28
- pattern_id: tdd-violation
- status: deployed

## Problem Statement

在使用 skill-generator 修改/重构现有 skill 时，修改完成后没有强制运行测试验证。这违反了 TDD 原则中的 RED-GREEN-REFACTOR 循环。

### Root Cause
SKILL.md 中的 Phase 6 TEST-RUN 只在"创建新 skill"流程中被触发，但在"修改现有 skill"场景下没有强制要求。

### Impact
- 修改后的 skill 可能不符合规范
- 回归问题无法及时发现
- 违反 TDD 原则

## Proposed Changes

### Change 1: 添加"修改现有 skill"工作流

在 SKILL.md 中添加专门的修改/重构工作流，强制要求测试验证。

```markdown
## 修改现有 Skill 工作流

当修改现有 skill 时（而非创建新 skill），必须遵循以下流程：

### MODIFY-REFACTOR 流程

1. **ANALYZE** - 分析现有 skill 和问题
2. **TEST-BASELINE** - 运行现有测试，记录基线
3. **MODIFY** - 进行修改
4. **TEST-VERIFY** - 运行测试验证修改
5. **ITERATE** - 如测试失败，返回 MODIFY

**⚠️ 强制要求**：每次修改后必须立即运行：
\`\`\`bash
./scripts/validate-skill.sh <skill-dir>
./scripts/run-skill-tests.sh <skill-dir>
\`\`\`
```

### Change 2: 更新进度追踪 Checklist

添加修改场景的 checklist。

## Validation Plan

1. 运行 validate-skill.sh 验证修改后的 SKILL.md
2. 运行 run-skill-tests.sh 验证所有场景
3. 在新会话中测试修改流程

## Rollback Plan

如果改进导致问题，恢复到之前的 SKILL.md 版本。
